ifndef::snippets[]
:snippets: build/generated-snippets
endif::[]
ifndef::doc[]
:doc: src/docs/asciidoc
endif::[]
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 3
:sectlinks:
:operation-http-request-title: Example Request
:operation-http-response-title: Example Response
ifndef::snippets-custom[]
:snippets-custom: ../../../src/docs/custom



[[title]]
= DTX API 문서

include::{doc}/common.adoc[]


[[verify]]
== 1. 회원 인증
회원가입을 위한 회원 인증 API

회원 인증 API 에서 `서비스 이용 동의` 는 올바른 요청인지만 검사합니다.

사용자 서비스 이용 동의 여부 데이터는 회원가입 API 에서 저장합니다.


*[회원 인증 실패]*

- 연락처 일치, 실명 불일치 : `"회원 정보가 일치하지 않아요. 다시 확인해주세요."`
- 연락처 불일치, 실명 일치 : `"회원 정보를 찾을 수 없습니다. 다시 확인해주세요."`
- 병원 환자 테이블에 존재하지 않는 사용자 : `"존재하지 않는 회원입니다."`
- 이미 가입된 사용자 : `"이미 가입한 사용자입니다."`
- 서비스 이용 동의 불일치, 누락 : `"서비스 동의 개수 불일치"`
- 서비스 이용 동의 누락 : `"동의 항목 누락"`
- 서비스 이용 필수 동의 '미동의' : `"필수 동의 항목입니다."`

=== Http
include::{snippets}/login/verify/http-request.adoc[]
=== Request
include::{snippets}/login/verify/request-fields.adoc[]
=== Response
include::{snippets}/login/verify/response-fields.adoc[]
include::{snippets}/login/verify/response-body.adoc[]


[[signUp]]
== 2. 회원가입

사용자 회원가입 API

회원 인증 API 성공 시 return 된 `patientId` 를 담아서 요청합니다.

*[회원가입 실패]*

- 병원 환자 테이블에 존재하지 않는 사용자 : `"존재하지 않는 회원입니다."`
- 이미 가입된 사용자 : `"이미 가입한 사용자입니다."`
- 이미 존재하는 아이디 : `"이미 사용 중인 아이디입니다."`
- 존재하지 않는 비밀번호 찾기 질문 : `"존재하지 않는 질문입니다."`
- 서비스 이용 동의 불일치 : `"서비스 동의 개수 불일치"`
- 서비스 이용 동의 누락 : `"동의 항목 누락"`
- 서비스 이용 필수 동의 '미동의' : `"필수 동의 항목입니다."`
- 사용자 기기 정보 조회 불가능 : `"기기 종류 및 버전 정보가 없거나 잘못되었습니다."`

=== Http
include::{snippets}/login/signUp/http-request.adoc[]
=== Request
include::{snippets}/login/signUp/request-fields.adoc[]
=== Response
include::{snippets}/login/signUp/response-fields.adoc[]
include::{snippets}/login/signUp/response-body.adoc[]

[[loginIdCheck]]
== 3. 아이디 중복 확인
회원가입 시, 아이디 중복 확인을 위한 API

*[아이디 중복 확인 실패]*

- 이미 존재하는 아이디 : `"이미 사용 중인 아이디입니다."`

=== Http
include::{snippets}/login/loginId-check/http-request.adoc[]
=== Request
include::{snippets}/login/loginId-check/query-parameters.adoc[]
=== Response
include::{snippets}/login/loginId-check/response-fields.adoc[]
include::{snippets}/login/loginId-check/response-body.adoc[]


[[userLogin]]
== 4. 사용자 로그인
사용자 로그인 API

*[로그인 실패]*

- 존재하지 않는 아이디, 비밀번호 불일치 : `"아이디 혹은 비밀번호가 올바르지 않습니다."`
- 사용자 기기 정보 조회 불가능 : `"기기 종류 및 버전 정보가 없거나 잘못되었습니다."`

=== Http
include::{snippets}/login/http-request.adoc[]
=== Request
include::{snippets}/login/request-fields.adoc[]
=== Response
include::{snippets}/login/response-fields.adoc[]
include::{snippets}/login/response-body.adoc[]

[[userAutoLogin]]
== 5. 사용자 자동 로그인
사용자 자동 로그인 API

*[자동 로그인 실패]*

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."`
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."`
- 사용자 기기 정보 조회 불가능 : `"기기 종류 및 버전 정보가 없거나 잘못되었습니다."`

=== Http
include::{snippets}/user/auto-login/http-request.adoc[]
=== Request
include::{snippets}/user/auto-login/request-fields.adoc[]
=== Response
include::{snippets}/user/auto-login/response-fields.adoc[]
include::{snippets}/user/auto-login/response-body.adoc[]

[[userFindPassword]]
== 6. 사용자 비밀번호 찾기
비밀번호 재설정을 위한 아이디와 질문, 답변을 통한 비밀번호 찾기 API

*[비밀번호 찾기 실패]*

- 존재하지 않는 아이디 : `"존재하지 않는 아이디입니다."`
- 질문 혹은 답변 불일치 : `"질문 혹은 답변이 일치하지 않습니다."`

=== Http
include::{snippets}/login/find-password/http-request.adoc[]
=== Request
include::{snippets}/login/find-password/request-fields.adoc[]
=== Response
include::{snippets}/login/find-password/response-fields.adoc[]
include::{snippets}/login/find-password/response-body.adoc[]

[[userModifyPassword]]
== 7. 사용자 비밀번호 재설정
비밀번호 찾기 후 비밀번호 재설정 API

비밀번호 찾기 API 성공 시 return 된 `userId` 를 담아서 요청합니다.

*[비밀번호 재설정 실패]*

- 존재하지 않는 사용자 : `"존재하지 않는 회원입니다."`

=== Http
include::{snippets}/login/password/http-request.adoc[]
=== Request
include::{snippets}/login/password/request-fields.adoc[]
=== Reponse
include::{snippets}/login/password/response-fields.adoc[]
include::{snippets}/login/password/response-body.adoc[]

[[userPasswordVerify]]
== 8. 사용자 비밀번호 확인
보안정보 수정을 위한 비밀번호 확인 API

*[비밀번호 확인 실패]*

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."`
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."`
- 비밀번호 불일치 : `"비밀번호가 일치하지 않습니다."`

=== Http
include::{snippets}/user/password-verify/http-request.adoc[]
=== Request
include::{snippets}/user/password-verify/request-fields.adoc[]
=== Response
include::{snippets}/user/password-verify/response-fields.adoc[]
include::{snippets}/user/password-verify/response-body.adoc[]

[[userInfoModifyPassword]]
== 9. 사용자 보안정보 수정 - 비밀번호 변경
보안정보 수정 시, 비밀번호 변경 API

*[비밀번호 변경 실패]*

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."`
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."`

=== Http
include::{snippets}/user/password/http-request.adoc[]
=== Request
include::{snippets}/user/password/request-fields.adoc[]
=== Response
include::{snippets}/user/password/response-fields.adoc[]
include::{snippets}/user/password/response-body.adoc[]

[[userInfoModifyQnA]]
== 10. 사용자 보안정보 수정 - 질문과 답변 수정
보안정보 수정 시, 질문과 답변 수정 API

*[질문과 답변 수정 실패]*

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."`
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."`
- 존재하지 않는 비밀번호 찾기 질문 : `"존재하지 않는 질문입니다."`

=== Http
include::{snippets}/user/qna/http-request.adoc[]
=== Request
include::{snippets}/user/qna/request-fields.adoc[]
=== Response
include::{snippets}/user/qna/response-fields.adoc[]
include::{snippets}/user/qna/response-body.adoc[]

[[userModifyInfo]]
== 11. 사용자 회원정보 수정
사용자 회원정보 수정 API

*[회원정보 수정 실패]*

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."`
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."`

=== Http
include::{snippets}/user/http-request.adoc[]
=== Request
include::{snippets}/user/request-fields.adoc[]
=== Response
include::{snippets}/user/response-fields.adoc[]
include::{snippets}/user/response-body.adoc[]

[[userLogout]]
== 12. 사용자 로그아웃
사용자 로그아웃 API

*[로그아웃 실패]*

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."`
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."`
- 사용자 기기 정보 조회 불가능 : `"기기 종류 및 버전 정보가 없거나 잘못되었습니다."`

=== Http
include::{snippets}/user/logout/http-request.adoc[]
=== Response
include::{snippets}/user/logout/response-fields.adoc[]
include::{snippets}/user/logout/response-body.adoc[]

[[userDelete]]
== 13. 사용자 회원탈퇴
사용자 회원탈퇴 API

*[회원탈퇴 실패]*

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."`
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."`
- 사용자 기기 정보 조회 불가능 : `"기기 종류 및 버전 정보가 없거나 잘못되었습니다."`

=== Http
include::{snippets}/user/revoke/http-request.adoc[]
=== Response
include::{snippets}/user/revoke/response-fields.adoc[]
include::{snippets}/user/revoke/response-body.adoc[]